# 透析供給装置薬液補充アプリ仕様書

## プロジェクト概要

### プロジェクト名
透析供給装置薬液補充安全支援アプリ

### 目的
透析供給装置の薬液補充作業における安全性を向上させ、特に1人作業時の誤操作を防ぐための携帯アプリケーション

### 背景
- 次亜塩素酸ナトリウム（50L）と酢酸（50L）の2種類の薬液を補充
- 両薬液が混ざると塩素ガスが発生する危険性
- 現在2人体制だが、1人作業が必要な場合がある
- 携帯1つで間違いを防ぐ仕組みが必要

## 技術要件

### 開発環境
- **言語**: Python 3.10のみ
- **プラットフォーム**: ローカルアプリケーション
- **カメラ**: リアルタイム映像解析機能
- **AIモデル**: YOLOモデル（カスタム学習）
- **ラベル付けツール**: labelImg

### 主要機能

#### 1. 薬液選択機能
- 次亜塩素酸ナトリウム選択
- 酢酸選択
- 補充開始ボタン

#### 2. カメラ機能
- リアルタイムカメラ起動
- 映像ストリーミング

#### 3. 画像認識機能
- YOLOモデルによるリアルタイム物体検出
- 次亜塩素酸ナトリウムボトル認識（色付きテープ識別）
- 酢酸ボトル認識（色付きテープ識別）
- 蓋の開閉状態検出
- カスタム学習済みモデルの推論

#### 4. 安全確認機能
- 正しい薬液選択時の「◯」表示とピンポン音
- 誤った薬液選択時の「✕」表示とアラート音

## ユーザーフロー

1. アプリ起動
2. 薬液種類選択（次亜塩素酸ナトリウム or 酢酸）
3. 補充開始ボタン押下
4. カメラ起動
5. リアルタイム映像解析
6. ボトル認識と蓋開閉検出
7. 安全性確認（正解/誤答の音声・視覚フィードバック）

## 安全要件

### 誤操作防止
- 選択した薬液と実際に開けたボトルが一致するかチェック
- 不一致時の即座の警告
- 視覚的・聴覚的フィードバック

### 識別システム
- ボトル蓋に色付きテープを貼付
- テープ色による薬液種類の識別
- 蓋の開閉状態の検出

## 技術的制約

- Python 3.10のみ使用
- ローカルアプリケーション（サーバー不要）
- リアルタイム処理要件
- 携帯端末での動作
- YOLOモデルの学習データ準備が必要
- labelImgによる手動ラベル付け作業

## 学習データ準備

### ラベル付け要件
- **ツール**: labelImg
- **対象物体**: 
  - 次亜塩素酸ナトリウムボトル（蓋閉じ状態）
  - 次亜塩素酸ナトリウムボトル（蓋開き状態）
  - 酢酸ボトル（蓋閉じ状態）
  - 酢酸ボトル（蓋開き状態）
- **識別方法**: 色付きテープによる視覚的区別
- **データ量**: 各状態につき十分な学習データが必要

### モデル学習
- YOLOモデルのカスタム学習
- リアルタイム推論用の最適化
- 精度と速度のバランス調整

## 成功基準

- 1人作業時の誤操作を100%防止
- リアルタイムでの正確な薬液識別
- 直感的なユーザーインターフェース
- 安定したカメラ機能と画像認識
